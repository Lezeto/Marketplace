* { box-sizing: border-box; }
body, html, #root, .app-shell { height: 100%; margin:0; font-family: system-ui, Arial, sans-serif; background:#0d1117; color:#e6edf3; }

.visually-hidden { position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap; }

.app-shell { display:flex; align-items:center; justify-content:center; padding:1.5rem; }

.panel { background:#161b22; padding:2rem 2.25rem; border:1px solid #30363d; border-radius:14px; width:100%; max-width:400px; box-shadow:0 4px 18px -2px rgba(0,0,0,.4); }
.panel h1, .panel h2 { margin-top:0; text-align:center; }
.tagline { text-align:center; margin-top:-0.5rem; margin-bottom:1.5rem; color:#8b949e; }

input { width:100%; padding:0.75rem 0.85rem; margin-bottom:0.85rem; background:#0d1117; border:1px solid #30363d; border-radius:8px; color:#e6edf3; font-size:0.95rem; }
input:focus { outline:2px solid #2563eb; border-color:#2563eb; }

button { cursor:pointer; background:#2563eb; color:#fff; border:none; padding:0.7rem 1.1rem; border-radius:8px; font-weight:600; font-size:0.9rem; display:inline-flex; align-items:center; gap:0.4rem; transition:background .2s, transform .1s; }
button:hover:not(:disabled) { background:#1d4ed8; }
button:active:not(:disabled) { transform:translateY(1px); }
button:disabled { opacity:.6; cursor:not-allowed; }
.row { display:flex; gap:0.75rem; }

.auth-form { display:flex; flex-direction:column; }
.username-form { display:flex; gap:0.5rem; }
.link-btn { background:transparent; color:#58a6ff; padding:0; font-weight:500; }
.link-btn:hover { text-decoration:underline; background:transparent; }

.error { background:#3d1f20; border:1px solid #f85149; color:#ffb4b2; padding:0.6rem 0.75rem; border-radius:8px; margin-bottom:1rem; font-size:0.8rem; }

.loading { font-size:1.2rem; opacity:.8; }

/* Game layout */
.layout { display:flex; gap:1.25rem; width:100%; max-width:1050px; }
.main-game { flex:1; background:#161b22; border:1px solid #30363d; border-radius:16px; padding:1.5rem; display:flex; flex-direction:column; gap:1.2rem; position:relative; }
.sidebar { width:260px; background:#161b22; border:1px solid #30363d; border-radius:16px; padding:1.25rem; display:flex; flex-direction:column; }
.sidebar h3 { margin:0 0 .5rem; }
.refresh { align-self:flex-end; margin-bottom:.5rem; background:#30363d; }
.refresh:hover { background:#3d444d; }

.top-bar { display:flex; justify-content:space-between; align-items:center; font-size:0.85rem; }
.top-bar button { background:#30363d; font-size:0.7rem; padding:0.45rem 0.8rem; }
.top-bar button:hover { background:#3d444d; }

.score-box { background:#0d1117; border:1px solid #30363d; padding:0.75rem 1rem; border-radius:12px; display:inline-flex; flex-direction:column; width:fit-content; }
.score-box .label { font-size:0.65rem; letter-spacing:.05em; color:#8b949e; text-transform:uppercase; }
.score-box .value { font-size:1.6rem; font-weight:700; margin-top:0.15rem; }

.start-btn { font-size:1rem; margin-top:0.25rem; }

.timer { font-size:1.4rem; font-weight:600; letter-spacing:.04em; }

.click-area { flex:1; display:flex; align-items:center; justify-content:center; border:2px dashed #30363d; border-radius:18px; font-size:1.4rem; text-align:center; padding:1rem; user-select:none; transition:background .15s, border-color .15s; background:#0d1117; }
.click-area.active { background:linear-gradient(135deg, #1e293b 0%, #0d1117 70%); border-color:#2563eb; box-shadow:0 0 0 2px #1d4ed8 inset; }
.click-area span { max-width:480px; line-height:1.3; }

/* Leaderboard */
.leaderboard { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:0.35rem; }
.leaderboard li { display:flex; gap:0.5rem; align-items:center; background:#0d1117; border:1px solid #30363d; padding:0.35rem 0.55rem; border-radius:8px; font-size:0.8rem; }
.leaderboard li.me { border-color:#2563eb; background:linear-gradient(90deg, rgba(37,99,235,0.15), #0d1117 60%); }
.leaderboard .rank { width:1.2rem; text-align:right; opacity:.6; }
.leaderboard .user { flex:1; font-weight:500; }
.leaderboard .score { font-weight:600; font-variant-numeric:tabular-nums; }

/* Nav Bar */
.nav-bar { display:flex; gap:0.6rem; align-items:center; background:#0d1117; border:1px solid #30363d; padding:0.45rem 0.75rem; border-radius:10px; font-size:0.75rem; }
.nav-bar button { background:#30363d; font-size:0.65rem; padding:0.4rem 0.7rem; }
.nav-bar button.active { background:#2563eb; }
.nav-bar .spacer { flex:1; }
.nav-bar .nav-username { font-weight:600; font-size:0.7rem; opacity:.85; }

/* Linkish button wrappers */
.linkish { background:transparent !important; color:#58a6ff; text-align:left; padding:0; font-weight:500; }
.linkish:hover { text-decoration:underline; }

/* Profile */
.profile-card { background:#161b22; border:1px solid #30363d; border-radius:16px; padding:1.2rem 1.4rem; display:flex; flex-direction:column; gap:1rem; }
.profile-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:0.6rem 1rem; font-size:0.8rem; }
.profile-grid .full { grid-column:1 / -1; }
.profile-grid .k { text-transform:uppercase; font-size:0.6rem; letter-spacing:.05em; color:#8b949e; margin-right:0.35rem; }
.profile-grid .v { font-weight:500; }
.profile-form { background:#161b22; border:1px solid #30363d; border-radius:16px; padding:1.2rem 1.4rem; display:flex; flex-direction:column; gap:1rem; }
.form-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:0.9rem 1rem; }
.form-grid label { display:flex; flex-direction:column; gap:0.35rem; font-size:0.7rem; text-transform:uppercase; letter-spacing:.05em; color:#8b949e; }
.form-grid input, .form-grid textarea { margin:0; font-size:0.75rem; }
.col-full { grid-column:1 / -1; }
.mt { margin-top:0.75rem; }
.secondary { background:#30363d; }
.secondary:hover { background:#3d444d; }

/* Chat */
.chat-wrapper { display:flex; flex-direction:column; gap:0.75rem; height:100%; }
.messages { flex:1; overflow-y:auto; background:#0d1117; border:1px solid #30363d; border-radius:14px; padding:0.75rem; display:flex; flex-direction:column; gap:0.5rem; font-size:0.7rem; }
.message { display:grid; grid-template-columns:auto 1fr auto; gap:0.45rem 0.6rem; align-items:start; background:#161b22; border:1px solid #30363d; padding:0.45rem 0.55rem; border-radius:8px; }
.message .author { background:transparent; padding:0; color:#58a6ff; font-size:0.7rem; }
.message .author:hover { text-decoration:underline; }
.message .content { font-size:0.75rem; }
.message .time { font-size:0.55rem; opacity:.6; align-self:center; }
.chat-input { display:flex; gap:0.5rem; }
.chat-input input { flex:1; margin:0; }
.empty { opacity:.6; font-size:0.75rem; text-align:center; margin-top:1rem; }

/* Layout single variant */
.layout.single { max-width:760px; min-height: 760px;}

/* Scrollbar styling (optional) */
.messages::-webkit-scrollbar { width:8px; }
.messages::-webkit-scrollbar-track { background:#0d1117; }
.messages::-webkit-scrollbar-thumb { background:#30363d; border-radius:6px; }
.messages::-webkit-scrollbar-thumb:hover { background:#3d444d; }

/* Listings */
.listings { display:flex; flex-direction:column; gap:0.5rem; }
.listing-row { display:grid; grid-template-columns:1fr auto; gap:0.5rem; align-items:center; background:#0d1117; border:1px solid #30363d; padding:0.6rem 0.75rem; border-radius:10px; cursor:pointer; }
.listing-row:hover { border-color:#2563eb; }
.listing-row .user { font-size:0.75rem; color:#8b949e; }
.listing-row .title { font-weight:600; }
.listing-row .price { font-weight:700; }

/* Thumbnails */
.listing-row.has-thumb { grid-template-columns:52px 1fr auto; }
.listing-row .thumb { width:48px; height:48px; object-fit:cover; border-radius:8px; border:1px solid #30363d; background:#111; }

/* Detail image */
.listing-image { width:100%; max-height:360px; object-fit:cover; border-radius:12px; border:1px solid #30363d; margin-bottom:0.75rem; background:#111; }

@media (max-width: 920px) {
  .layout { flex-direction:column; }
  .sidebar { width:100%; order:-1; flex-direction:row; flex-wrap:wrap; }
  .sidebar h3 { width:100%; }
  .leaderboard { flex-direction:row; flex-wrap:wrap; }
  .leaderboard li { width:calc(50% - 0.4rem); }
}

@media (max-width: 560px) {
  .leaderboard li { width:100%; }
  .main-game { padding:1rem; }
  .panel { padding:1.6rem 1.4rem; }
}
